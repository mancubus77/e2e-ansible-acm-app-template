---
apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  annotations:
    apps.open-cluster-management.io/git-branch: main
    apps.open-cluster-management.io/reconcile-option: merge
  labels:
    app: vran-{{ cluster_name }}-app
  name: vran-{{ cluster_name }}-subscription
  namespace: {{ cluster_name }}
spec:
  # channel: {{ git_url | split('/') | last | regex_replace('([\.-])', '') }}-ns/{{ git_url | split('/') | last | regex_replace('([\.-])', '') }}-channel
  channel: {{ cluster_name }}/{{ git_url | split('/') | last | regex_replace('([\.-])', '') }}-channel
  placement:
    placementRef:
      kind: PlacementRule
      name: vran-{{ cluster_name }}-placemenrule